import {join} from 'path';
import {repoDir} from '../file-paths';
import {getAllLessFiles} from './get-all-less-files';

describe(getAllLessFiles.name, () => {
    it('should get all less files in this repo', async () => {
        const searchDir = join(repoDir, 'test-files');
        const files = await getAllLessFiles(searchDir);
        expect(files).toEqual(
            [
                join(searchDir, 'cli-test', 'importable', 'a.less'),
                join(searchDir, 'cli-test', 'importable', 'b.less'),
                join(searchDir, 'cli-test', 'main-files', 'c.less'),
                join(searchDir, 'cli-test', 'main-files', 'd.less'),
                join(searchDir, 'cli-test', 'main-files', 'expected-main-file.less'),
                join(searchDir, 'cli-test', 'main-files', 'main-file.less'),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'broken',
                    'used-imports.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'broken',
                    'unused-imports.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'broken',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'fixed',
                    'used-imports.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'fixed',
                    'unused-imports.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-unused-imports',
                    'fixed',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'broken',
                    'b.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'broken',
                    'c.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'broken',
                    'a.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'broken',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'fixed',
                    'b.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'fixed',
                    'c.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'fixed',
                    'a.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-separated-unused-imports',
                    'fixed',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'broken',
                    'b.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'broken',
                    'c.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'broken',
                    'a.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'broken',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'fixed',
                    'b.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'fixed',
                    'c.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'fixed',
                    'a.less',
                ),
                join(
                    searchDir,
                    '',
                    'directory-tests',
                    'with-all-unused-imports',
                    'fixed',
                    'top-file.less',
                ),
                join(
                    searchDir,
                    '',
                    'parse-testing',
                    'all-the-things-with-extra-importable-things.less',
                ),
                join(searchDir, '', 'parse-testing', 'all-the-things.less'),
                join(searchDir, '', 'parse-testing', 'simple-file.less'),
                join(searchDir, '', 'parse-testing', 'unused-imports.less'),
                join(
                    searchDir,
                    '',
                    'parse-testing',
                    'all-the-things-with-extra-exportable-things.less',
                ),
            ].sort(),
        );
    });
});
